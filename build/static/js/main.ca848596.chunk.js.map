{"version":3,"sources":["components/routes/AuthRoutes.js","components/routes/PrivateRoutes.js","App.js","components/routes/index.js","index.js","components/routes/Auth.js","constants.js","components/loader/Loader.js","components/loader/Formloader.js","components/loader/toast.js","components/api/index.js","components/routes/constants.js"],"names":["AuthRoutes","Component","component","rest","isLogged","useAuth","render","props","to","CHATS","PrivateRoute","socket","pathname","LOGIN","state","referrer","location","Home","lazy","Login","Register","ForgotPassword","Chats","Routes","fallback","exact","path","HOME","REGISTER","FORGOT_PASSWORD","PrivateRoutes","App","existingTokens","localStorage","getItem","useState","authTokens","setAuthTokens","setIsLogged","userData","setUserData","token","tokens","setStatus","value","username","useEffect","io","config","API_URL","jwtDecode","exp","Date","now","emit","makeGetReq","then","data","catch","off","Auth","Provider","setItem","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","document","getElementById","AuthContext","createContext","useContext","Loader","className","Spinner","animation","variant","size","Formloader","as","role","aria-hidden","showToast","type","message","toast","success","error","reqConfig","headers","Authorization","makePostReq","a","axios","post","response","get"],"mappings":"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","file":"static/js/main.ca848596.chunk.js","sourcesContent":["import React from 'react';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useAuth} from './Auth';\nimport {CHATS} from './constants';\n\nfunction AuthRoutes({component: Component, ...rest}) {\n\tconst {isLogged} = useAuth();\n\n\treturn <Route {...rest} render={(props) => (isLogged ? <Redirect to={CHATS} /> : <Component {...props} />)} />;\n}\n\nexport default AuthRoutes;\n","import React from 'react';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useAuth} from './Auth';\nimport {LOGIN} from './constants';\n\nfunction PrivateRoute({component: Component, ...rest}) {\n\tconst {isLogged} = useAuth();\n\n\treturn (\n\t\t<Route\n\t\t\t{...rest}\n\t\t\trender={(props) =>\n\t\t\t\tisLogged ? <Component {...props} /> : <Redirect to={{pathname: LOGIN, state: {referrer: props.location}}} />\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default PrivateRoute;\n","import React, {useState, useEffect} from 'react';\nimport Routes from './components/routes';\nimport {ToastContainer} from 'react-toastify';\nimport {AuthContext} from './components/routes/Auth';\nimport jwtDecode from 'jwt-decode';\nimport {makeGetReq} from './components/api';\nimport io from 'socket.io-client';\nimport {config} from './constants';\n\nlet socket;\n\nfunction App() {\n\tconst existingTokens = localStorage.getItem('tokens');\n\tconst [authTokens, setAuthTokens] = useState(existingTokens);\n\tconst [isLogged, setIsLogged] = useState(false);\n\tconst [userData, setUserData] = useState({});\n\n\tconst token = localStorage.tokens;\n\n\tconst setTokens = (data) => {\n\t\tlocalStorage.setItem('tokens', data);\n\t\tsetAuthTokens(data);\n\t};\n\n\tconst setStatus = (value) => {\n\t\tsetIsLogged(value);\n\t};\n\n\tconst setData = (data) => {\n\t\tsetUserData(data);\n\t};\n\n\tconst username = localStorage.username;\n\n\tuseEffect(() => {\n\t\tsocket = io(config.API_URL);\n\t\tconst getDetails = () => {\n\t\t\tif (token) {\n\t\t\t\tconst decodedToken = jwtDecode(token);\n\t\t\t\tif (decodedToken.exp * 1000 < Date.now()) {\n\t\t\t\t\tsetStatus(false);\n\t\t\t\t\tsocket.emit('offline', {username});\n\t\t\t\t} else {\n\t\t\t\t\tsetStatus(true);\n\t\t\t\t\tmakeGetReq('user/profile')\n\t\t\t\t\t\t.then(({data}) => {\n\t\t\t\t\t\t\tsetUserData(data);\n\t\t\t\t\t\t\tsocket.emit('online', {username});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tsetUserData({});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsocket.emit('offline', {username});\n\t\t\t}\n\t\t};\n\n\t\tgetDetails();\n\n\t\treturn () => {\n\t\t\tsocket.emit('offline', {username});\n\t\t\tsocket.emit('disconnect');\n\n\t\t\tsocket.off();\n\t\t};\n\t}, [token, username]);\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{authTokens, setAuthTokens: setTokens, isLogged, setIsLogged: setStatus, userData, setUserData: setData}}\n\t\t>\n\t\t\t<ToastContainer\n\t\t\t\tposition='top-center'\n\t\t\t\tautoClose={5000}\n\t\t\t\thideProgressBar={false}\n\t\t\t\tnewestOnTop={false}\n\t\t\t\tcloseOnClick\n\t\t\t\trtl={false}\n\t\t\t\tpauseOnFocusLoss\n\t\t\t\tdraggable\n\t\t\t\tpauseOnHover\n\t\t\t/>\n\t\t\t<Routes />\n\t\t</AuthContext.Provider>\n\t);\n}\n\nexport default App;\n","import React, {Suspense, lazy} from 'react';\nimport {Route, Switch, BrowserRouter as Router} from 'react-router-dom';\nimport {Loader} from '../loader';\nimport {FORGOT_PASSWORD, HOME, LOGIN, REGISTER, CHATS} from './constants';\nimport AuthRoutes from './AuthRoutes';\nimport PrivateRoutes from './PrivateRoutes';\n\nconst Home = lazy(() => import('../home' /* webpackChunkName: \"Home Page\" */));\nconst Login = lazy(() => import('../login' /* webpackChunkName: \"Login Page\" */));\nconst Register = lazy(() => import('../register' /* webpackChunkName: \"Register Page\" */));\nconst ForgotPassword = lazy(() => import('../forgotPassword' /* webpackChunkName: \"Forgot Password Page\" */));\nconst Chats = lazy(() => import('../chats' /* webpackChunkName: \"Chats Page\" */));\n\nconst Routes = () => {\n\treturn (\n\t\t<Router>\n\t\t\t<Suspense fallback={<Loader />}>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path={HOME} component={Home} />\n\t\t\t\t\t<AuthRoutes exact path={LOGIN} component={Login} />\n\t\t\t\t\t<AuthRoutes exact path={REGISTER} component={Register} />\n\t\t\t\t\t<AuthRoutes exact path={FORGOT_PASSWORD} component={ForgotPassword} />\n\t\t\t\t\t<PrivateRoutes exact path={CHATS} component={Chats} />\n\t\t\t\t</Switch>\n\t\t\t</Suspense>\n\t\t</Router>\n\t);\n};\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './assets/sass/light-bootstrap-dashboard-react.scss?v=1.3.0';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import { createContext, useContext } from 'react';\n\nexport const AuthContext = createContext();\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}","const prod = {\n\tAPI_URL: 'https://mensaje-app.herokuapp.com/',\n};\n\nconst dev = {\n\tAPI_URL: 'http://localhost:5000/',\n};\n\nexport const config = process.env.NODE_ENV === 'development' ? dev : prod;\n","import React from 'react';\nimport Spinner from 'react-bootstrap/Spinner';\n\nconst Loader = () => {\n\treturn (\n\t\t<div className='main'>\n\t\t\t<div className='cover black'></div>\n\t\t\t<div className='container'>\n\t\t\t\t<h1 className='logo'>Mensaje</h1>\n\t\t\t\t<div className='content'>\n\t\t\t\t\t<h4 className='motto'>A better way to connect and communicate with friends.</h4>\n\t\t\t\t\t<div className='subscribe'>\n\t\t\t\t\t\t<div className='info-text'>\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t\t<Spinner animation='grow' variant='light' size='sm' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Loader;\n","import React from 'react';\nimport Spinner from 'react-bootstrap/Spinner';\n\nconst Formloader = () => {\n\treturn (\n\t\t<>\n\t\t\t<Spinner as='span' animation='border' size='sm' role='status' aria-hidden='true' /> Loading...\n\t\t</>\n\t);\n};\n\nexport default Formloader;\n","import {toast} from 'react-toastify';\n\nconst showToast = (type, message) => {\n\tswitch (type) {\n\t\tcase 'ok':\n\t\t\treturn toast.success(message, {\n\t\t\t\tcloseOnClick: true,\n\t\t\t});\n\t\tcase 'error':\n\t\t\treturn toast.error(message, {\n\t\t\t\tcloseOnClick: true,\n\t\t\t});\n\t\tdefault:\n\t\t\treturn toast('', {\n\t\t\t\tcloseOnClick: true,\n\t\t\t});\n\t}\n};\n\nexport default showToast;\n","import axios from 'axios';\nimport {config} from '../../constants';\n\nconst token = localStorage.getItem('tokens') ? localStorage.getItem('tokens') : '';\n\nconst reqConfig = {\n\theaders: {Authorization: token},\n};\n\nexport const makePostReq = async (path, data) => {\n\ttry {\n\t\tconst response = await axios.post(config.API_URL + path, data, reqConfig);\n\t\treturn response.data;\n\t} catch (err) {\n\t\treturn err.response.data;\n\t}\n};\n\nexport const makeGetReq = async (path) => {\n\ttry {\n\t\tconst response = await axios.get(config.API_URL + path, reqConfig);\n\t\treturn response.data;\n\t} catch (err) {\n\t\treturn err.response.data;\n\t}\n};\n","export const HOME = '/';\nexport const LOGIN = '/signin';\nexport const REGISTER = '/signup';\nexport const FORGOT_PASSWORD = '/forgot-password'\nexport const CHATS = '/chats'"],"sourceRoot":""}