(this.webpackJsonpmensaje=this.webpackJsonpmensaje||[]).push([[7],{124:function(e,t){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),u=n(19),i=n(18),s=n(2),l=n(38),m=n(8),f=n(25),p=n(14);var b=function(e){var t=e.component,n=Object(f.a)(e,["component"]),a=Object(p.b)().isLogged;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(s.a,{to:m.a}):r.a.createElement(t,e)}}))};var d,g=function(e){var t=e.component,n=Object(f.a)(e,["component"]),a=Object(p.b)().isLogged;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:m.d,state:{referrer:e.location}}})}}))},h=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,158))})),v=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,159))})),E=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,157))})),O=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,160))})),j=Object(a.lazy)((function(){return Promise.all([n.e(10),n.e(2)]).then(n.bind(null,156))})),k=function(){return r.a.createElement(i.a,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(l.b,null)},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:m.c,component:h}),r.a.createElement(b,{exact:!0,path:m.d,component:v}),r.a.createElement(b,{exact:!0,path:m.e,component:E}),r.a.createElement(b,{exact:!0,path:m.b,component:O}),r.a.createElement(g,{exact:!0,path:m.a,component:j}))))},w=n(15),x=n(68),z=n(40),I=n(69),L=n.n(I),P=n(17);var S=function(){var e=localStorage.getItem("tokens"),t=Object(a.useState)(e),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),l=s[0],m=s[1],f=Object(a.useState)({}),b=Object(u.a)(f,2),g=b[0],h=b[1],v=localStorage.tokens,E=function(e){m(e)},O=localStorage.username;return Object(a.useEffect)((function(){d=L()(P.a.API_URL);return v?1e3*Object(x.a)(v).exp<Date.now()?(E(!1),d.emit("offline",{username:O})):(E(!0),Object(z.a)("user/profile").then((function(e){var t=e.data;h(t),d.emit("online",{username:O})})).catch((function(){h({})}))):d.emit("offline",{username:O}),function(){d.emit("offline",{username:O}),d.emit("disconnect"),d.off()}}),[v,O]),r.a.createElement(p.a.Provider,{value:{authTokens:c,setAuthTokens:function(e){localStorage.setItem("tokens",e),o(e)},isLogged:l,setIsLogged:E,userData:g,setUserData:function(e){h(e)}}},r.a.createElement(w.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(k,null))};n(127),n(128),n(129);o.a.render(r.a.createElement(S,null),document.getElementById("root"))},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(0),r=Object(a.createContext)();function c(){return Object(a.useContext)(r)}},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={API_URL:"https://mensaje-app.herokuapp.com/"}},38:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s}));var a=n(0),r=n.n(a),c=n(9),o=function(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"cover black"}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo"},"Mensaje"),r.a.createElement("div",{className:"content"},r.a.createElement("h4",{className:"motto"},"A better way to connect and communicate with friends."),r.a.createElement("div",{className:"subscribe"},r.a.createElement("div",{className:"info-text"},r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}),r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}),r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}),r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}),r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}),r.a.createElement(c.a,{animation:"grow",variant:"light",size:"sm"}))))))},u=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," Loading...")},i=n(15),s=function(e,t){switch(e){case"ok":return i.b.success(t,{closeOnClick:!0});case"error":return i.b.error(t,{closeOnClick:!0});default:return Object(i.b)("",{closeOnClick:!0})}}},40:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m}));var a=n(16),r=n.n(a),c=n(26),o=n(36),u=n.n(o),i=n(17),s={headers:{Authorization:localStorage.getItem("tokens")?localStorage.getItem("tokens"):""}},l=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post(i.a.API_URL+t,n,s);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get(i.a.API_URL+t,s);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},70:function(e,t,n){e.exports=n(130)},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var a="/",r="/signin",c="/signup",o="/forgot-password",u="/chats"}},[[70,8,9]]]);
//# sourceMappingURL=main.ca848596.chunk.js.map